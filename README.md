# ğŸ¤– NanoManus: çº³ç±³æŠ€æœ¯æµç¨‹è‡ªåŠ¨åŒ–æ¡†æ¶

[![Python](https://img.shields.io/badge/Python-3.12+-blue.svg)](https://www.python.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

> åŸºäºLLMçš„çº³ç±³æŠ€æœ¯ç‰ˆå›¾è®¾è®¡ä¸è‡ªåŠ¨åŒ–å·¥å…·

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [å®‰è£…é…ç½®](#å®‰è£…é…ç½®)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [ç»˜åˆ¶ç‰ˆå›¾](#ç»˜åˆ¶ç‰ˆå›¾)
- [APIæ–‡æ¡£](#apiæ–‡æ¡£)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
- [å·¥ä½œæµç¨‹](#å·¥ä½œæµç¨‹)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

NanoManusæ˜¯ä¸€ä¸ªä¸“æ³¨äºçº³ç±³æŠ€æœ¯æµç¨‹è‡ªåŠ¨åŒ–çš„AI agentæ¡†æ¶ï¼Œèƒ½å¤Ÿé€šè¿‡è‡ªç„¶è¯­è¨€æŒ‡ä»¤è‡ªåŠ¨åŒ–å®Œæˆå¤æ‚çš„ç‰ˆå›¾è®¾è®¡ä»»åŠ¡ã€‚å®ƒç»“åˆäº†**å¤§è¯­è¨€æ¨¡å‹(LLM)**å’Œ**å·¥å…·è°ƒç”¨æ¡†æ¶**ï¼Œå®ç°äº†ä»è‡ªç„¶è¯­è¨€åˆ°ç‰ˆå›¾ç»˜åˆ¶çš„å®Œæ•´è‡ªåŠ¨åŒ–æµç¨‹ã€‚

### ä¸»è¦åº”ç”¨åœºæ™¯

- âœ¨ **ç‰ˆå›¾è®¾è®¡è‡ªåŠ¨åŒ–** - é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°ç”Ÿæˆç‰ˆå›¾
- ğŸ”§ **å¿†é˜»å™¨ç»˜åˆ¶** - è‡ªåŠ¨ç”Ÿæˆå¿†é˜»å™¨é˜µåˆ—
- ğŸ“ **Markæ ‡è®°ç»˜åˆ¶** - æ‰¹é‡ç”Ÿæˆæ ‡å‡†åŒ–çš„markæ ‡è®°
- ğŸ”Œ **æ™¶ä½“ç®¡è®¾è®¡** - è‡ªåŠ¨ç»˜åˆ¶æ™¶ä½“ç®¡åŠå…¶è¿æ¥
- ğŸ¨ **å¤æ‚å‡ ä½•å›¾å½¢** - æ”¯æŒå¤šè¾¹å½¢ã€èµ°çº¿ã€åœ†å½¢ã€æ‰‡å½¢ç­‰å¤šç§å›¾å½¢

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. **æ™ºèƒ½åŒ–å·¥å…·è°ƒç”¨**
- ğŸ”„ åŸºäºLLMè‡ªåŠ¨è§£æç”¨æˆ·æŒ‡ä»¤
- ğŸ› ï¸ æ”¯æŒå¤šç§ç‰ˆå›¾ç»˜åˆ¶å‘½ä»¤
- ğŸ“ è‡ªåŠ¨ç”Ÿæˆç¬¦åˆL-Editè§„èŒƒçš„å‘½ä»¤

### 2. **ç‰ˆå›¾ç»˜åˆ¶èƒ½åŠ›**
- ğŸ“ åŸºäºLeditçš„11ç§åŸºç¡€ç»˜åˆ¶å‘½ä»¤ï¼ˆå¤šè¾¹å½¢ã€æ™¶ä½“ç®¡ã€å­—ç¬¦ä¸²ã€èµ°çº¿ã€åœ†å½¢ç­‰ï¼‰
- ğŸ”€ å¸ƒå°”è¿ç®—å’Œæ•°ç»„å¤åˆ¶
- ğŸ”¬ å¿†é˜»å™¨ä¸“ç”¨ç»˜åˆ¶å·¥å…·
- âœ… æ ‡å‡†Markæ ‡è®°ç”Ÿæˆ

### 3. **å®æ—¶é€šä¿¡æ¶æ„**
- ğŸŒ åŸºäºTCP Socketå®ç°Pythonä¸L-Edité€šä¿¡
- âš¡ å®æ—¶å‘½ä»¤ä¼ è¾“ä¸åé¦ˆ
- ğŸ“Š å®Œæ•´çš„çŠ¶æ€åŒæ­¥æœºåˆ¶

### 4. **çµæ´»çš„å¯¹è¯ç³»ç»Ÿ**
- ğŸ’¬ æ”¯æŒå¤šè½®å¯¹è¯
- ğŸ” ä¸Šä¸‹æ–‡è®°å¿†ç®¡ç†
- ğŸ¯ æ™ºèƒ½é”™è¯¯æ¢å¤

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·äº¤äº’å±‚                              â”‚
â”‚                      (è‡ªç„¶è¯­è¨€æŒ‡ä»¤)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NanoManus Agent                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  System Prompt  â”‚  ä»»åŠ¡ç†è§£ & å·¥å…·é€‰æ‹©                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  LLM Engine (deepseek / QWen)                          â”‚ â”‚
â”‚  â”‚  â€¢ æŒ‡ä»¤è§£æ                                             â”‚ â”‚
â”‚  â”‚  â€¢ å·¥å…·è°ƒç”¨ç”Ÿæˆ                                         â”‚ â”‚
â”‚  â”‚  â€¢ ä¸Šä¸‹æ–‡ç®¡ç†                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å·¥å…·è°ƒç”¨å±‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  LayoutSend Tool â”‚  â”‚  AskHuman Tool   â”‚                â”‚
â”‚  â”‚  - å‘½ä»¤æ ¼å¼åŒ–    â”‚  â”‚  - ç”¨æˆ·ç¡®è®¤       â”‚                â”‚
â”‚  â”‚  - TCPé€šä¿¡       â”‚  â”‚  - éœ€æ±‚æ¾„æ¸…      â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç½‘ç»œé€šä¿¡å±‚                                  â”‚
â”‚         TCP Socket (localhost:8888)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  L-Edit UPI Socket Server                    â”‚
â”‚         (C++å®ç°çš„UPIæ‰©å±•æ’ä»¶)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  L-Editç‰ˆå›¾ç¼–è¾‘å™¨                              â”‚
â”‚             å®æ—¶ç‰ˆå›¾ç»˜åˆ¶ä¸æ¸²æŸ“                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶è¯´æ˜

#### 1ï¸âƒ£ **NanoManus Agent** (`app/agent/nano_manus.py`)

ç»§æ‰¿è‡ª`ToolCallAgent`ï¼Œæ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒè°ƒåº¦å™¨ï¼š

```python
class nano_Manus(ToolCallAgent):
    """çº³ç±³æŠ€æœ¯æµç¨‹è‡ªåŠ¨åŒ–Agent"""

    name: str = "nano_Manus"
    system_prompt: str = SYSTEM_PROMPT  # ä»promptæ–‡ä»¶åŠ è½½
    available_tools: ToolCollection = ToolCollection(
        layoutsend(),  # ç‰ˆå›¾ç»˜åˆ¶å·¥å…·
        AskHuman(),    # äººæœºäº¤äº’å·¥å…·
        Terminate()    # ç»ˆæ­¢å·¥å…·
    )
```

**ä¸»è¦èŒè´£ï¼š**
- ğŸ“¥ æ¥æ”¶ç”¨æˆ·è‡ªç„¶è¯­è¨€æŒ‡ä»¤
- ğŸ§  ä½¿ç”¨LLMç†è§£å’Œè§„åˆ’ä»»åŠ¡
- ğŸ”§ é€‰æ‹©åˆé€‚çš„å·¥å…·æ‰§è¡Œ
- ğŸ“Š ç®¡ç†å¯¹è¯ä¸Šä¸‹æ–‡
- âœ… éªŒè¯æ‰§è¡Œç»“æœ

#### 2ï¸âƒ£ **LLMå¼•æ“** (`app/llm.py`)

è´Ÿè´£ä¸å¤§è¯­è¨€æ¨¡å‹çš„äº¤äº’ï¼š

- **æ”¯æŒçš„æ¨¡å‹**ï¼šDeepseek, Qwen, GPT-4o, Claude, Geminiç­‰
- **æ ¸å¿ƒæ–¹æ³•**ï¼š
  - `ask()` - æ™®é€šå¯¹è¯
  - `ask_tool()` - å·¥å…·è°ƒç”¨æ¨¡å¼
  - `ask_with_images()` - å¤šæ¨¡æ€è¾“å…¥

**Tokenç®¡ç†ï¼š**
- âœ… è‡ªåŠ¨è®¡ç®—è¾“å…¥token
- âš ï¸ è¶…é™æ£€æµ‹ä¸ä¿æŠ¤
- ğŸ“ˆ ä½¿ç”¨é‡ç»Ÿè®¡

#### 3ï¸âƒ£ **LayoutSendå·¥å…·** (`app/tool/layout_interact.py`)

ç‰ˆå›¾ç»˜åˆ¶å‘½ä»¤çš„æ ¸å¿ƒå°è£…ï¼š

```python
class layoutsend(BaseTool):
    """é€šè¿‡TCPå‘é€ç‰ˆå›¾ç»˜åˆ¶å‘½ä»¤åˆ°L-Edit"""

    async def execute(self, message: str, host="localhost", port=8888):
        # 1. å»ºç«‹TCPè¿æ¥
        sender = NetworkSender(host=host, port=port)

        # 2. å‘é€å‘½ä»¤
        success = sender.send_message(message)

        # 3. æ¥æ”¶åé¦ˆ
        response = decode_response(response_bytes)

        return result
```

**é€šä¿¡æµç¨‹ï¼š**
1. ğŸ”Œ è¿æ¥åˆ°L-Edit UPI SocketæœåŠ¡å™¨
2. ğŸ“¤ å‘é€æ ¼å¼åŒ–çš„å‘½ä»¤å­—ç¬¦ä¸²
3. â±ï¸ ç­‰å¾…æ‰§è¡Œåé¦ˆ
4. âœ… è¿”å›æ‰§è¡Œç»“æœ

#### 4ï¸âƒ£ **System Prompt** (`app/prompt/nano_manus.py`)

å®šä¹‰äº†AIçš„è¡Œä¸ºè§„èŒƒå’ŒæŠ€èƒ½ï¼š

```
You are NanoManus, ä¸“æ³¨äºæä¾›è½»é‡å®šåˆ¶åŒ–çš„æ–°å…´çº³ç±³æŠ€æœ¯æµç¨‹è‡ªåŠ¨åŒ–ã€‚
ç›®å‰ä½ å¯ä»¥è°ƒç”¨LayoutSend()å·¥å…·æ¥ä¸ç‰ˆå›¾å·¥å…·äº¤äº’ã€‚

æ”¯æŒçš„å‘½ä»¤ï¼š
1. ç”»å¤šè¾¹å½¢ï¼špolygon layer=Source; points=0 0;1000 0;20 1000;0 1000
2. ç”»æ™¶ä½“ç®¡ï¼šenhanced_transistor W=5000,L=3000,X=2000,Y=4000
3. ç”»å­—ç¬¦ä¸²ï¼štext text=hello; mag=50; x=3000; y=1000; layer=mos2
4. æ£€æŸ¥å·¥å…·ï¼šlist
5. ç”»èµ°çº¿ï¼špath layer=Source; 0 0, 1000 1000; width=200
6. ç”»åœ†å½¢ï¼šcircle layer=Source; 1000 0; radius=1000
...
```

---

## ğŸ”§ å®‰è£…é…ç½®

### ç¯å¢ƒè¦æ±‚

- Python 3.12+
- OpenAI / Anthropic API Key
- L-Editç‰ˆå›¾ç¼–è¾‘å™¨
- L-Edit UPI Socket Serveræ’ä»¶

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-repo/OpenManus_Archive-nano.git
cd OpenManus_Archive-nano
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
# ä½¿ç”¨conda
conda create -n nanomanus python=3.12
conda activate nanomanus

# æˆ–ä½¿ç”¨uv (æ¨è)
uv venv --python 3.12
source .venv/bin/activate  # Windows: .venv\Scripts\activate
```

### 3. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 4. é…ç½®APIå¯†é’¥





### 5. å¯åŠ¨L-Edit UPI Server

ç¡®ä¿L-Editå·²åŠ è½½Socket Serveræ’ä»¶ï¼Œç›‘å¬ç«¯å£8888ã€‚
<img width="540" height="586" alt="a4e8846e-e8b3-4c3c-9184-8a0ac552d6e9" src="https://github.com/user-attachments/assets/0271b7e7-5f17-4423-8997-8aa5ecd938d1" />



---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯åŠ¨NanoManus

```bash
python main_nano.py
```

### åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹

```
Enter your prompt: ç”»ä¸€ä¸ª1000nmÃ—1000nmçš„æ­£æ–¹å½¢ï¼Œåœ¨Sourceå›¾å±‚ä¸Š

>>> [AIæ€è€ƒ] ç”¨æˆ·æƒ³è¦ç»˜åˆ¶ä¸€ä¸ªæ­£æ–¹å½¢ï¼Œæˆ‘éœ€è¦ä½¿ç”¨polygonå‘½ä»¤ã€‚
>>> [å·¥å…·è°ƒç”¨] layoutsend: polygon layer=Source; 0 0; 1000 0; 1000 1000; 0 1000
>>> [ç»“æœ] âœ… å‘½ä»¤æ‰§è¡ŒæˆåŠŸ
```

---

## ğŸ¨ ç»˜åˆ¶ç‰ˆå›¾

### æ”¯æŒçš„å‘½ä»¤

#### 1. **å¤šè¾¹å½¢ç»˜åˆ¶**

```python
# æ ¼å¼
polygon layer=<å›¾å±‚å>; <ç‚¹1>; <ç‚¹2>; <ç‚¹3>; ...

# ç¤ºä¾‹ï¼šçŸ©å½¢
polygon layer=Source; 0 0; 1000 0; 1000 1000; 0 1000

# ç¤ºä¾‹ï¼šä¸‰è§’å½¢
polygon layer=Gate; 0 0; 5000 0; 2500 5000
```

#### 2. **æ™¶ä½“ç®¡ç»˜åˆ¶**

```python
# æ ¼å¼
enhanced_transistor W=<å®½åº¦>, L=<é•¿åº¦>, X=<Xåæ ‡>, Y=<Yåæ ‡>,
                    gatelayer=<æ …æå±‚>, channellayer=<æ²Ÿé“å±‚>,
                    sourcelayer=<æºæå±‚>

# ç¤ºä¾‹
enhanced_transistor W=30000, L=1500, X=200000, Y=200000,
                    gatelayer=Gate, channellayer=Channel,
                    sourcelayer=Source
```

**å‚æ•°è¯´æ˜ï¼š**
- `W`: æ™¶ä½“ç®¡å®½åº¦ (nm)
- `L`: æ™¶ä½“ç®¡é•¿åº¦ (nm)
- `X, Y`: æ™¶ä½“ç®¡åŸç‚¹åæ ‡ (nm)
- `gatelayer`: æ …æå±‚åç§°
- `channellayer`: æ²Ÿé“å±‚åç§°
- `sourcelayer`: æºæå±‚åç§°

#### 3. **æ–‡æœ¬æ ‡è®°**

```python
# æ ¼å¼
text text=<æ–‡å­—å†…å®¹>; mag=<å­—ç¬¦å¤§å°>; x=<Xåæ ‡>; y=<Yåæ ‡>; layer=<å›¾å±‚>

# ç¤ºä¾‹
text text=Device_A; mag=30; x=50000; y=50000; layer=Gate
```

**Magå€¼ä¸çº¿å®½å…³ç³»ï¼š**
- mag=1 â†’ å­—ç¬¦çº¿å®½100nm
- mag=50 â†’ å­—ç¬¦çº¿å®½5000nm

#### 4. **èµ°çº¿ç»˜åˆ¶**

```python
# æ ¼å¼
path layer=<å›¾å±‚>; <ç‚¹1>, <ç‚¹2>, <ç‚¹3>; width=<å®½åº¦>

# ç¤ºä¾‹
path layer=Source; 0 0, 10000 0, 10000 10000; width=2000
```

#### 5. **åœ†å½¢ç»˜åˆ¶**

```python
# æ ¼å¼
circle layer=<å›¾å±‚>; <ä¸­å¿ƒX> <ä¸­å¿ƒY>; radius=<åŠå¾„>

# ç¤ºä¾‹
circle layer=Source; 5000 5000; radius=2000
```

#### 6. **æ‰‡å½¢ç»˜åˆ¶**

```python
# æ ¼å¼
piewedge layer=<å›¾å±‚>; <ä¸­å¿ƒX> <ä¸­å¿ƒY>; radius=<åŠå¾„>; angle=<èµ·å§‹è§’åº¦> <ç»“æŸè§’åº¦>

# ç¤ºä¾‹
piewedge layer=Source; 5000 5000; radius=3000; angle=0 90
```

#### 7. **åœ†å¼§ç»˜åˆ¶**

```python
# æ ¼å¼
ringwedge layer=<å›¾å±‚>; <ä¸­å¿ƒX> <ä¸­å¿ƒY>; radius=<å†…åŠå¾„> <å¤–åŠå¾„>; angle=<èµ·å§‹> <ç»“æŸ>

# ç¤ºä¾‹
ringwedge layer=Source; 5000 5000; radius=2000 3000; angle=0 180
```

#### 8. **é˜µåˆ—å¤åˆ¶**

```python
# æ ¼å¼
array layer=<å›¾å±‚>; <åŸºæœ¬å›¾å½¢>; nx=<åˆ—æ•°>, dx=<åˆ—é—´è·>; ny=<è¡Œæ•°>, dy=<è¡Œé—´è·>

# ç¤ºä¾‹ï¼šå¤šè¾¹å½¢é˜µåˆ—
array layer=Source; polygon 0 0, 1000 0, 1000 800, 0 800; nx=3, dx=1500; ny=2, dy=1200

# ç¤ºä¾‹ï¼šåœ†å½¢é˜µåˆ—
array layer=Source; circle 0 0, radius=500; nx=5, dx=3000; ny=3, dy=2500
```

#### 9. **å¸ƒå°”è¿ç®—**

```python
# åŠ æ³•ï¼ˆå¹¶é›†ï¼‰
boolexpr layer=Source; ( polygon 0 0; 200 0; 200 200; 0 200 / polygon 100 100; 300 100; 300 300; 100 300 )

# å‡æ³•
boolexpr layer=Source; ( polygon 0 0; 200 0; 200 200; 0 200 - polygon 100 100; 300 100; 300 300; 100 300 )
```

#### 10. **å¿†é˜»å™¨ç»˜åˆ¶**

```python
# æ ¼å¼
memristor linewidth=<çº¿å®½>, extension=<å»¶ä¼¸é•¿åº¦>, X=<ä¸­å¿ƒX>, Y=<ä¸­å¿ƒY>,
           rotated=<æ—‹è½¬è§’åº¦>, toplayer=<é¡¶ç”µæå±‚>, bottomlayer=<åº•ç”µæå±‚>

# ç¤ºä¾‹
memristor linewidth=3000, extension=1500, X=0, Y=0, rotated=0,
           toplayer=Topelectrode, bottomlayer=Contact
```

**æ—‹è½¬è§’åº¦ï¼š**
- `0`: é¡¶ç”µæå‚ç›´
- `1`: åº•ç”µæå‚ç›´

#### 11. **æŸ¥è¯¢å¯ç”¨å·¥å…·**

```python
# å‘½ä»¤
list

# è¿”å›å½“å‰L-Editæ”¯æŒçš„æ‰€æœ‰å‘½ä»¤
```

---

## ğŸ“š APIæ–‡æ¡£

### ToolCallAgentç±»

```python
class ToolCallAgent(ReActAgent):
    """å·¥å…·è°ƒç”¨AgentåŸºç±»"""

    # é…ç½®
    system_prompt: str                    # ç³»ç»Ÿæç¤ºè¯
    next_step_prompt: str                 # ä¸‹ä¸€æ­¥æç¤º
    available_tools: ToolCollection       # å¯ç”¨å·¥å…·åˆ—è¡¨

    # æ‰§è¡Œ
    async def think() -> bool             # æ€è€ƒå¹¶é€‰æ‹©å·¥å…·
    async def step() -> str               # æ‰§è¡Œä¸€æ­¥
    async def run(request: str) -> str    # è¿è¡Œå®Œæ•´æµç¨‹
```

### BaseToolç±»

```python
class BaseTool(ABC, BaseModel):
    """å·¥å…·åŸºç±»"""

    name: str                             # å·¥å…·åç§°
    description: str                      # å·¥å…·æè¿°
    parameters: dict                      # å‚æ•°å®šä¹‰

    async def execute(**kwargs) -> Any    # æ‰§è¡Œå·¥å…·
    def to_param() -> dict                # è½¬æ¢ä¸ºå‡½æ•°è°ƒç”¨æ ¼å¼
```

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šåŸºæœ¬å›¾å½¢ç»˜åˆ¶

```
ç”¨æˆ·ï¼šç”»ä¸€ä¸ªçŸ©å½¢ï¼Œå®½2000nmï¼Œé«˜1000nmï¼Œå·¦ä¸‹è§’åœ¨(0,0)ï¼Œå›¾å±‚Source

AIï¼š[æ€è€ƒ] éœ€è¦ç”»ä¸€ä¸ªçŸ©å½¢ï¼Œå®½2000nmé«˜1000nm
[å·¥å…·è°ƒç”¨] layoutsend: polygon layer=Source; 0 0; 2000 0; 2000 1000; 0 1000
[ç»“æœ] âœ… çŸ©å½¢ç»˜åˆ¶æˆåŠŸ

AIï¼š[è¯¢é—®] çŸ©å½¢å·²ç»˜åˆ¶å®Œæˆã€‚è¿˜éœ€è¦å…¶ä»–æ“ä½œå—ï¼Ÿ
```

### ç¤ºä¾‹2ï¼šæ™¶ä½“ç®¡è®¾è®¡

```
ç”¨æˆ·ï¼šåœ¨(100000, 100000)ä½ç½®ç”»ä¸€ä¸ªW=5000, L=2000çš„æ™¶ä½“ç®¡

AIï¼š[æ€è€ƒ] ç»˜åˆ¶æ™¶ä½“ç®¡ï¼Œä½¿ç”¨enhanced_transistorå‘½ä»¤
[å·¥å…·è°ƒç”¨] layoutsend: enhanced_transistor W=5000, L=2000, X=100000, Y=100000,
                      gatelayer=Gate, channellayer=Channel, sourcelayer=Source
[ç»“æœ] âœ… æ™¶ä½“ç®¡ç»˜åˆ¶æˆåŠŸ

AIï¼šæ™¶ä½“ç®¡å·²ç»˜åˆ¶åœ¨æŒ‡å®šä½ç½®ï¼ŒW=5000nm, L=2000nm
```

### ç¤ºä¾‹3ï¼šMarkæ ‡è®°é˜µåˆ—

```
ç”¨æˆ·ï¼šç”»ä¸€ä¸ª3Ã—4çš„marké˜µåˆ—ï¼Œé˜µåˆ—åŸç‚¹åœ¨(0,0)ï¼Œé˜µåˆ—è§„æ¨¡(30000, 40000)Î¼m

AIï¼š[æ€è€ƒ] éœ€è¦ç»˜åˆ¶åå­—æ ‡å’Œæ•°å­—æ ‡è®°é˜µåˆ—
[æ­¥éª¤1] æ°´å¹³çŸ©å½¢é˜µåˆ—
[å·¥å…·è°ƒç”¨] layoutsend: array layer=Gate; polygon -2500 -20000, 2500 -20000, ...;
                      nx=3, dx=100000; ny=4, dy=100000
[æ­¥éª¤2] å‚ç›´çŸ©å½¢é˜µåˆ—
[æ­¥éª¤3] å·¦ä¸Šè§’æ•°å­—é˜µåˆ— (0-3)
[æ­¥éª¤4] å³ä¸‹è§’æ•°å­—é˜µåˆ— (0-3)

[ç»“æœ] âœ… Marké˜µåˆ—ç»˜åˆ¶å®Œæˆ
```

### ç¤ºä¾‹4ï¼šå¤æ‚ç»“æ„ - å¿†é˜»å™¨é˜µåˆ—

```
ç”¨æˆ·ï¼šç”»3ä¸ªå¿†é˜»å™¨ï¼Œçºµå‘æ’åˆ—ï¼Œé—´è·50000nm

AIï¼š[æ€è€ƒ] éœ€è¦3ä¸ªå¿†é˜»å™¨ï¼Œçºµå‘é—´è·50Î¼m
[å·¥å…·è°ƒç”¨] layoutsend: memristor linewidth=3000, extension=1500, X=100000, Y=0, ...
[å·¥å…·è°ƒç”¨] layoutsend: memristor linewidth=3000, extension=1500, X=100000, Y=50000, ...
[å·¥å…·è°ƒç”¨] layoutsend: memristor linewidth=3000, extension=1500, X=100000, Y=100000, ...

[ç»“æœ] âœ… å¿†é˜»å™¨é˜µåˆ—ç»˜åˆ¶å®Œæˆ
```

---

## ğŸ”„ å·¥ä½œæµç¨‹

### å®Œæ•´æ‰§è¡Œæµç¨‹

```
1. ç”¨æˆ·è¾“å…¥
   â†“
2. Agentæ¥æ”¶æŒ‡ä»¤
   â†“
3. LLMç†è§£ä»»åŠ¡
   â”œâ”€ è§£æè‡ªç„¶è¯­è¨€
   â”œâ”€ è¯†åˆ«ç»˜åˆ¶éœ€æ±‚
   â””â”€ ç”Ÿæˆå·¥å…·è°ƒç”¨è®¡åˆ’
   â†“
4. å·¥å…·é€‰æ‹©
   â”œâ”€ LayoutSend - ç‰ˆå›¾ç»˜åˆ¶
   â”œâ”€ AskHuman - ç”¨æˆ·ç¡®è®¤
   â””â”€ Terminate - ç»“æŸä»»åŠ¡
   â†“
5. å‘½ä»¤æ ¼å¼åŒ–
   â”œâ”€ éªŒè¯å‘½ä»¤è¯­æ³•
   â”œâ”€ æ·»åŠ å¿…è¦å‚æ•°
   â””â”€ ç”ŸæˆL-Editå‘½ä»¤
   â†“
6. TCPé€šä¿¡
   â”œâ”€ è¿æ¥åˆ°L-EditæœåŠ¡å™¨
   â”œâ”€ å‘é€å‘½ä»¤
   â””â”€ æ¥æ”¶æ‰§è¡Œç»“æœ
   â†“
7. ç»“æœåé¦ˆ
   â”œâ”€ è§£ææœåŠ¡å™¨å“åº”
   â”œâ”€ æ›´æ–°å¯¹è¯ä¸Šä¸‹æ–‡
   â””â”€ å‡†å¤‡ä¸‹ä¸€æ­¥
   â†“
8. åˆ¤æ–­æ˜¯å¦å®Œæˆ
   â”œâ”€ æ˜¯ â†’ è°ƒç”¨AskHumanç¡®è®¤
   â””â”€ å¦ â†’ è¿”å›æ­¥éª¤3
   â†“
9. ç”¨æˆ·ç¡®è®¤
   â”œâ”€ æ»¡æ„ â†’ Terminate
   â””â”€ éœ€ä¿®æ”¹ â†’ ç»§ç»­å¾ªç¯
```

### çŠ¶æ€è½¬æ¢

```
IDLE (ç©ºé—²)
  â†“ [ç”¨æˆ·è¾“å…¥]
RUNNING (è¿è¡Œä¸­)
  â†“ [å·¥å…·è°ƒç”¨]
EXECUTING (æ‰§è¡Œä¸­)
  â†“ [è¿”å›ç»“æœ]
RUNNING
  â†“ [ä»»åŠ¡å®Œæˆ]
FINISHED (å®Œæˆ)
  â†“
IDLE
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•ä¿®æ”¹LLMæ¨¡å‹ï¼Ÿ

**A:** åœ¨`config/config.toml`ä¸­ä¿®æ”¹ï¼š

```toml
[llm]
model = "deepseek"  # æ”¹ä¸º claude-3-opus, gemini-proç­‰
```

### Q2: è¿æ¥L-Editå¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. L-Editæ˜¯å¦æ­£åœ¨è¿è¡Œ
2. UPI Socket Serveræ˜¯å¦å·²å¯åŠ¨
3. ç«¯å£8888æ˜¯å¦è¢«å ç”¨
4. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

### Q3: å¦‚ä½•æ·»åŠ æ–°çš„ç»˜åˆ¶å‘½ä»¤ï¼Ÿ

**A:** åœ¨`app/prompt/nano_manus.py`ä¸­æ›´æ–°`SYSTEM_PROMPT`ï¼š

```python
SYSTEM_PROMPT = (
    "ç°æœ‰å‘½ä»¤..."
    "12. æ–°å¢å‘½ä»¤ï¼š<å‘½ä»¤æ ¼å¼>; <ç¤ºä¾‹>"
)
```

### Q4: Tokenè¶…é™æ€ä¹ˆåŠï¼Ÿ

**A:** å‡å°‘å¯¹è¯å†å²æˆ–å¢åŠ max_input_tokensï¼š

```python
# config.toml
max_input_tokens = 50000  # å¢åŠ é™åˆ¶
```

### Q5: å‘½ä»¤æ‰§è¡Œå¤±è´¥å¦‚ä½•è°ƒè¯•ï¼Ÿ

**A:** æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼š

```bash
# æ—¥å¿—ä½ç½®
logs/YYYYMMDDHHMMSS.log

# å…³é”®ä¿¡æ¯
[INFO] Tool arguments: {...}
[ERROR] Command execution failed: ...
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æäº¤Issueæˆ–æ”¹è¿›æ–‡æ¡£ï¼

### ä»£ç è§„èŒƒ

- ä½¿ç”¨Blackæ ¼å¼åŒ–ä»£ç 
- éµå¾ªPEP8é£æ ¼æŒ‡å—
- æ·»åŠ ç±»å‹æ³¨è§£
- ç¼–å†™æ–‡æ¡£å­—ç¬¦ä¸²

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹[LICENSE](LICENSE)æ–‡ä»¶äº†è§£è¯¦æƒ…

---

## ğŸ™ è‡´è°¢

- OpenManusé¡¹ç›® - æä¾›åŸºç¡€æ¡†æ¶
- MetaGPTç¤¾åŒº - çµæ„Ÿå’Œæ”¯æŒ
- L-Edit - ç‰ˆå›¾ç¼–è¾‘å¹³å°

---

## ğŸ“§ è”ç³»æ–¹å¼

- **é¡¹ç›®ä¸»é¡µ**: [GitHub Repository](https://github.com/Yanming-liu-ac/NanoManus)
- **é‚®ç®±**: liuyanming_ic@163.com

---

## ğŸŒŸ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç»™ä¸€ä¸ªâ­ï¸ï¼

---

**NanoManus** - è®©çº³ç±³æŠ€æœ¯è®¾è®¡æ›´ç®€å• âš¡

